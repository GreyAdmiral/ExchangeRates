"use strict";async function money(){try{let e=await fetch("https://www.nbrb.by/api/exrates/rates?periodicity=0");if(!e.ok)throw`Looks like there was a problem. Status Code: ${e.status}`;let t=await e.json(),o=await fetch("https://www.nbrb.by/api/exrates/rates?periodicity=1");if(!o.ok)throw`Looks like there was a problem. Status Code: ${o.status}`;let n=await o.json(),a=t.concat(n).sort((e,t)=>e.Cur_Name.localeCompare(t.Cur_Name));a.forEach(e=>moneyLine(e)),table.append(fragment),sortLabel("Валюта"),table.addEventListener("dblclick",doubleClick)}catch(e){moneyError(e)}}function moneyLine(e){let{Cur_ID:t,Cur_Abbreviation:o,Cur_Scale:n,Cur_Name:a,Cur_OfficialRate:r,Date:c}=e,l=c.split("T")[0].split("-").reverse().join("."),s=[...document.querySelectorAll(".money__item--title > span")],m=document.createElement("div");m.classList.add("money__item","money__item--row"),m.id=t,m.innerHTML=`<span data-text="${s[0].textContent}">${o}</span><span data-text="${s[1].textContent}">${n}</span><span data-text="${s[2].textContent}">${a}</span><span data-text="${s[3].textContent}">${r}</span><span data-text="${s[4].textContent}">${l}</span>`,fragment.append(m)}function moneyError(e){let t=document.createElement("span"),o=document.querySelector(".footer"),n=document.querySelector(".money__item--title");n.remove(),o.remove(),t.classList.add("money__error"),t.textContent="Произошла ошибка!",console.log(e),table.append(t)}function copyCell(e){navigator.clipboard?navigator.clipboard.writeText(e.textContent).then(()=>console.log("Скопировано!")).catch(e=>console.log(e)):window.getSelection()?(document.getSelection().selectAllChildren(e),document.execCommand("copy"),document.getSelection().empty()):document.body.createTextRange&&(range=document.body.createTextRange(),range.moveToElementText(e),range.select(),document.execCommand("copy"))}function sortCell(e,t){let o=`[data-text="${sortText}"]`,n=e.querySelector(o).textContent,a=t.querySelector(o).textContent,r=e=>e.split(".").reverse().join("-");switch(Number.isNaN(+n)){case!0:return"Дата"==sortText?r(n).localeCompare(r(a)):n.localeCompare(a);case!1:return n-a}}function sortLabel(e,t){document.querySelectorAll(".money__item--title span").forEach(t=>{if(t.textContent===e)switch(t.dataset.sort){case"down":t.dataset.sort="up";break;default:t.dataset.sort="down"}else t.removeAttribute("data-sort")})}function changeSort(e,t){switch(t.dataset.sort){case"down":domTableSort=e.sort(sortCell);break;case"up":domTableSort=e.sort(sortCell).reverse()}}function doubleClick(e){if(e.target.closest(".money__item--row > span")&&copyCell(e.target),e.target.closest(".money__item--title > span")){sortText=e.target.textContent;let t=[...document.getElementsByClassName("money__item--row")],o=new DocumentFragment,n=e.target;sortLabel(sortText),changeSort(t,n),t.forEach((e,t)=>{e.remove(),o.append(domTableSort[t])}),table.append(o)}e.stopPropagation()}let sortText,domTableSort,table=document.querySelector(".money__table"),fragment=new DocumentFragment,documentWidth=Math.max(document.documentElement.clientWidth,document.body.clientWidth,document.documentElement.offsetWidth,document.body.offsetWidth,document.documentElement.scrollWidth,document.body.scrollWidth);money(),documentWidth>768&&(document.addEventListener("copy",e=>e.preventDefault()),document.addEventListener("cut",e=>e.preventDefault()),document.addEventListener("paste",e=>e.preventDefault()),document.addEventListener("contextmenu",e=>e.preventDefault())),Number.isNaN||(Number.isNaN=function(e){return"number"==typeof e&&isNaN(e)});